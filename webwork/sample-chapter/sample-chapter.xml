<?xml version="1.0" encoding="UTF-8" ?>

<!-- ********************************************************************* -->
<!-- Copyright 2015-7                                                      -->
<!-- Robert A. Beezer, Michael Gage, Geoff Goehle, Alex Jordan             -->
<!--                                                                       -->
<!-- This file is part of PreTeXt.                                         -->
<!--                                                                       -->
<!-- PreTeXt is free software: you can redistribute it and/or modify       -->
<!-- it under the terms of the GNU General Public License as published by  -->
<!-- the Free Software Foundation, either version 2 or version 3 of the    -->
<!-- License (at your option).                                             -->
<!--                                                                       -->
<!-- PreTeXt is distributed in the hope that it will be useful,            -->
<!-- but WITHOUT ANY WARRANTY; without even the implied warranty of        -->
<!-- MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         -->
<!-- GNU General Public License for more details.                          -->
<!--                                                                       -->
<!-- You should have received a copy of the GNU General Public License     -->
<!-- along with PreTeXt. If not, see <http://www.gnu.org/licenses/>.       -->
<!-- ********************************************************************* -->

<!-- This is a PreTeXt "article" designed to look           -->
<!-- like a chapter of a book.  So it has several sections, -->
<!-- each with mathematical content and WeBWorK problems.   -->

<pretext>
    <!-- Other languages can be used to internationalize parts of a document -->
    <!-- <pretext xml:lang="pt-BR"> -->

    <!-- "docinfo" is like metadata, it is necessary technical -->
    <!-- information which a reader mostly will never see. -->

    <docinfo>

        <!-- In the HTML version there is room for a   -->
        <!-- picture or logo in the upper left corner. -->
        <brandlogo url="http://webwork.maa.org/" source="images/webwork-logo.png" />

        <!-- For WeBWorK problems, these LaTeX macros must          -->
        <!-- (a) be entirely on one line                            -->
        <!-- (b) not employ a previous custom macro                 -->
        <!-- (c) be defined only via \newcommand{<name>}{<command>} -->
        <macros>
        \newcommand{\definiteintegral}[4]{\int_{#1}^{#2}\,#3\,d#4}
        \newcommand{\indefiniteintegral}[2]{\int#1\,d#2} % comments get stripped
        </macros>

        <!-- this is the default, but supresses a warning -->
        <cross-references text="type-global" />

        <!-- An initialism is useful sometimes -->
        <initialism>WWSC</initialism>
        <!--
        With a <feedback> element, in the HTML version, you get a button
        for reporting typos and errors.  You might link to a Google Docs
        spreadsheet or something similar.  Default is to get a button
        labeled "Feedback", which will be localized to your target language.
        You can override this with some text of your choosing, but then you
        lose the localization feature.
        -->
        <feedback>
            <url>not-implemented.html</url>
             <!-- <text>My Button Text</text>  -->
        </feedback>

        <latex-image-preamble>
        <![CDATA[
        \usepackage{pgfplots}
        ]]>
        </latex-image-preamble>

    </docinfo>

    <article xml:id="sample-ww-chapter">
        <title>Integrating <webwork /> into Textbooks</title>
        <subtitle>Sample Exercises</subtitle>

        <frontmatter xml:id="index">

            <!-- Items typically at the top of the first page of an article -->
            <titlepage>
               <!-- There can be several authors here -->
                <author>
                    <personname>Robert Beezer</personname>
                    <department>Department of Mathematics and Computer Science</department>
                    <institution>
                        <line>University of Puget Sound</line>
                        <line>Tacoma, Washington, USA</line>
                    </institution>
                    <email>beezer@pugetsound.edu</email>
                </author>

                <author>
                    <personname>Alex Jordan</personname>
                    <department>Department of Mathematics</department>
                    <institution>
                        <line>Portland Community College</line>
                        <line>Portland, Oregon, USA</line>
                    </institution>
                    <email>alex.jordan@pcc.edu</email>
                </author>

                <!-- Can set date manually or use the "today" element -->
                <date><today /></date>

            </titlepage>


            <abstract>
                <p>This is a sample article to demonstrate integrating <webwork /> homework problems into content authored with <pretext />.  While technically an example of <pretext />'s <c>article</c> format, it is intended to closely resemble a chapter of a <pretext /> <c>book</c> that is divided into sections.</p>
                <p>This work was funded with grants from <url href="http://openoregon.org/">OpenOregon</url> and the <url href="http://pugetsound.edu">University of Puget Sound</url>.</p>
                <p>Rob Beezer (University of Puget Sound) and Alex Jordan (Portland Community College) worked on the <pretext /> enhancements that make this possible. Mike Gage (Univeristy of Rochester), Geoff Goehle (Western Carolina University), and Alex Jordan made this possible by enhancing the <webwork /> end, and generally maintaining <webwork /> software.</p>
                <p>This article assumes a mild familiarity with both <url href="https://pretextbook.org/"><pretext /></url> and <url href="http://webwork.maa.org/wiki/Main_Page"><webwork /></url>. For more information about either project, follow the links.</p>
            </abstract>

        </frontmatter>

        <section>
            <title>Open Problem Library</title>


                <p>The <url href="http://webwork.maa.org/wiki/Open_Problem_Library">Open Problem Library</url> (OPL) is a repository of curated <webwork /> problems. At last count it had something like 30,000 problems, searchable by topic.</p>

                <p>Most of the problems in this sample chapter have their source authored within the same document as the narrative.  However the problems in this section are from the OPL and elsewhere on the server that is hosting the <webwork /> caclulations.  For HTML output we can connect to the server and render the problem here in an interactive fashion.  For print/PDF we use the <c>mbx</c> script to connect to the server to produce <pretext /> code for the problem.  We can use the <c>exercise.text.*</c> switches to control which parts of the problem (statements, solutions, hints) are incorporated.</p>

                <p>Problems do not have to be in the OPL to reside on a server; any problem that is accessbile from the <webwork /> course which is hosting the <webwork /> computation may be used this way.</p>

            <exercise xml:id="cylinder-volume">
                <title>Cylinder Volume</title>

                <introduction>
                    <p>This problem is one that Portland Community College has donated to the Open Problem Library.</p>
                </introduction>

                <webwork source="Library/PCC/BasicAlgebra/Geometry/CylinderVolume10.pg" seed="8435"/>
            </exercise>

            <warning>
                <title>Incompatible Problems</title>

                <p>Not all problems that come from the OPL are compatible with <pretext />. The reasons vary. Perhaps the problem uses older <webwork /> macros that cannot be augmented to provide <pretext /> output. Perhaps the problem nests a table within a table, which <pretext /> will not support. Perhaps there are graphics in the problem that are not sized appropriately for <pretext /> output and there's nothing you can do about it. And there are many more reasons.</p>

                <p>Unfortunately the variety of reasons for which a problem may be incompatible means that at present, there is no way to validate a problem automatically. Using an incompatible problem might not raise any errors at any stage of the <pretext /> processing, but large chunks of the problem may be missing, especially in print output. So we recommend that you review all output modes when using an OPL problem. Chances are that if it is behaving in print, it will behave elsewhere. But that is an unproven theory at this point.</p>
            </warning>
        </section>

        <section>
            <title>Antidifferentiation</title>

            <subsection>
                <title>A Few More Features</title>

                <p>This subsection demonstrates a few more features.</p>

                <definition xml:id="definition-antiderivative">
                    <title>Antiderivative of a Function</title>

                    <statement>
                        <p>Suppose that <m>f(x)</m> and <m>F(x)</m> are two functions such that <me>F^\prime(x) = f(x).</me>  Then we say <m>F</m> is an <term>antiderivative</term> of <m>f</m>.</p>
                    </statement>
                </definition>

                <p>The Fundamental Theorem of Calculus in one of the high points of a course in single-variable course.</p>

                <theorem xml:id="theorem-FTC">
                    <title>The Fundamental Theorem of Calculus</title>
                    <idx>Fundamental Theorem of Calculus</idx>
                    <statement>
                        <p>If <m>f(x)</m> is continuous, and the derivative of <m>F(x)</m> is <m>f(x)</m>, then <me>\definiteintegral{a}{b}{f(x)}{x}=F(b)-F(a)</me></p>
                    </statement>
                    <proof>
                        <p>Left to the reader.</p>
                    </proof>
                </theorem>

                <p>We state an equivalent version of the FTC, which is less-suited for computation, but which perhaps is a more interesting theoretical statement.</p>

                <corollary xml:id="corollary-FTC-derivative">
                    <statement>
                        <p>Suppose <m>f(x)</m> is a continuous function.  Then <men xml:id="equation-alternate-FTC">\frac{d}{dx}\definiteintegral{a}{x}{f(t)}{t}=f(x)</men></p>
                    </statement>
                    <proof xml:id="proof-FTC-corollary">
                        <p>We simply take the indicated derivative, applying <xref ref="theorem-FTC" /> at <xref ref="equation-use-FTC" />.<mdn>
                            <mrow xml:id="equation-use-FTC">\frac{d}{dx}\definiteintegral{a}{x}{f(t)}{t}&amp;=\frac{d}{dx}\left(F(x)-F(a)\right)</mrow>
                            <mrow number="no">&amp;=\frac{d}{dx}F(x)-\frac{d}{dx}F(a)</mrow>
                            <mrow>&amp;=f(x)-0 = f(x)</mrow>
                        </mdn></p>
                    </proof>
                </corollary>
            </subsection>

            <exercises>
                <title><webwork /> Exercises</title>

                <introduction>
                    <p>The first problem in this list is coming from the <webwork /> Open Problem Library. One implication of this is that we might want to provide some commentary that connects the problem to the text.  The other two ask for essay answers, which would be graded by an instructor, so in the HTML output there is no opportunity to provide an answer.</p>
                </introduction>

                <exercise xml:id="ww-antiderivatives">
                    <title>Antiderivatives</title>

                    <introduction>
                        <p>Consult <xref ref="definition-antiderivative" /> and the <xref ref="theorem-FTC" text="title" /> to assist you with the following problem.</p>
                    </introduction>

                    <webwork source="Library/ma122DB/set12/s5_4_26.pg" />

                    <conclusion>
                        <p>Unless the OPL has changed this problem out from under us, note the <q>SOLUTION</q> appearing in the solution. That is hard-coded into the OPL version of the problem. This is an example of something undesirable that may happen when using OPL problems that were not originally written with <pretext /> in mind.</p>
                    </conclusion>
                </exercise>

                <exercise xml:id="ww-discuss-always-antiderivative">
                    <title>Every Continuous Function has an Antiderivative</title>

                    <introduction>
                        <p><webwork /> problems can allow for open-ended essay responses that are intended to be assessed later by the instructor. For anonymous access, no text field is provided. But if this problem were used within <webwork /> as part of a homework set, users could submit an answer.</p>
                    </introduction>

                    <webwork>
                        <statement>
                            <p>Explain how we can use <xref ref="corollary-FTC-derivative" /> to say that every continuous function <em>always</em> has a derivative. (And we will demonstrate here that you can use a  macro from <c>docinfo</c>: <m>\definiteintegral{1}{2}{\frac{1}{x}}{x}=\ln(2)</m>. It will work in the <webwork /> problem, regardless of whether you are using images, MathJax, or hardcopy.)</p>
                            <p><var form="essay" /></p>
                        </statement>
                    </webwork>
                </exercise>

                <exercise xml:id="ww-discuss-inverse-processes">
                    <title>Inverse Processes</title>

                    <webwork>
                        <statement>
                            <p><q>Differentiation and integration are inverse processes.</q>  Cite <alert>specific results</alert> from this section in an explanation of how they justify this (somewhat imprecise) claim.</p>
                            <p><var form="essay" width="40"/></p>
                        </statement>
                    </webwork>
                </exercise>

            </exercises>
        </section>

        <section>
            <title>Graphics in Exercises</title>
            <p>It is natural to want to write exercises that rely on graphics. For example, an exericse might produce a chart of some kind, and ask the reader to extract some information from that chart.</p>
            <p>At present, this can be done using the same mechanism one would use to insert a graphic into a <webwork /> problem when writing regular <webwork /> problems. (And this is what is done below.) In the future, there will be a nicer option that will be able to make use of PTX's <c>latex-image-code</c>. This requires some <webwork /> development first, which is underway.</p>

            <exercise>
                <title>Solve using a graph</title>

                <webwork>

                    <setup>
                        <pg-code>
                            $answer = random(1,3,1);
                            $gr = init_graph(-1,-1,4,4,
                            axes=>[0,0],
                            grid=>[5,5],
                            size=>[300,300]
                            );
                            add_functions($gr, "x^3/$answer^3 for x in &lt;-1,4&gt; using color:blue and weight:2");
                            $second_x = Real($answer*2**(1/3));

                            $solgr = init_graph(-1,-1,4,4,
                            axes=>[0,0],
                            grid=>[5,5],
                            size=>[300,300]
                            );
                            add_functions($solgr, "x^3/$answer^3 for x in &lt;-1,4&gt; using color:blue and weight:2");
                            $solgr->moveTo(0,1);
                            $solgr->lineTo($answer,1,'black',3);
                            $solgr->arrowTo($answer,0,'black',3);

                        </pg-code>
                    </setup>

                    <statement>
                        <p>The graph below is a graph of <m>y=f(x)</m>. Use the graph to solve the equation <m>f(x)=1</m>.</p>

                        <sidebyside widths="50%">
                            <image pg-name="$gr">
                                <description>a plot of a curve on a cartesian set of axes; the x axis ranges from -1 to 4, and the y-axis ranges from -1 to 4; the curve enters from the left, below the x-axis, and curves upward and to the right until it reaches the point (0,0); from here it continues predominantly rightward for a bit, bending slightly upward more and more as it progresses; it passes through the points (<var name="$answer"/>,1) and (<var name="$second_x"/>,2) before leaving the graph moving more and more upward and to the right.</description>
                            </image>
                        </sidebyside>

                        <p><m>x=</m> <var name="$answer" width="5" category="number"/></p>
                    </statement>

                    <solution>

                        <p>The graph reveals that the only solution to <m>f(x)=1</m> is <m>x=<var name="$answer"/></m>.</p>

                        <sidebyside widths="50%">
                            <image pg-name="$solgr">
                                <description>a plot of a curve on a cartesian set of axes; the x axis ranges from -1 to 4, and the y-axis ranges from -1 to 4; the curve enters from the left, below the x-axis, and curves upward and to the right until it reaches the point (0,0); from here it continues predominantly rightward for a bit, bending slightly upward more and more as it progresses; it passes through the points ($answer,1) and ($second_x,2) before leaving the graph moving more and more upward and to the right; a horizontal line segment moves rightward from y=1 on the y-axis until it reaches a point on the curve; a vertical line segment moves down from this point to x=$answer on the x-axis.</description>
                            </image>
                        </sidebyside>

                    </solution>

                </webwork>
            </exercise>
        </section>

        <section>
            <exercise>
                <webwork source="local/2019-06-29-01.pg"/>
            </exercise>

            <exercise>
                <webwork source="rochesterLibrary/instructiveProblems/OldProblems/Sets_2.pg"/>
            </exercise>

            <exercise>
                <webwork source="Library/CollegeOfIdaho/setAlgebra_02_02_AlgebraOfFunctions/22IntAlg_11_functOperation.pg"/>
            </exercise>
        </section>

        <backmatter>
            <!-- 2018-09-19: answers are not yet available, so we -->
            <!-- still test that asking for them is not a problem -->
            <solutions inline="hint answer solution" divisional="hint answer solution">
                <title>Hints, Answers, and Solutions</title>
            </solutions>
        </backmatter>
    </article>
</pretext>
